name: "Silences validate"
description: "Validate silences CR files"
inputs:
  directory:
    description: "Directory with silence CR files"
    required: true
runs:
  using: "composite"
  steps:
    - name: Set GitHub Path
      run: echo "$GITHUB_ACTION_PATH" >> $GITHUB_PATH
      shell: bash
      env:
        GITHUB_ACTION_PATH: ${{ github.action_path }}
    - name: Install yq
      shell: bash
      run: |
        cd ${{ github.action_path }}
        make bin/yq
        cd -
    - name: Validate silences files
      shell: bash
      run: silences-validate.sh ${{ inputs.directory }}
