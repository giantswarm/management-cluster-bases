---
apiVersion: konfigure.giantswarm.io/v1alpha1
kind: Konfiguration
metadata:
  name: mcp-kubernetes-konfiguration
  namespace: flux-giantswarm
spec:
  targets:
    schema:
      reference:
        name: management-cluster-configuration
        namespace: giantswarm
    defaults:
      variables:
        - name: installation
          value: "${cluster_name}"
    iterations:
      mcp-kubernetes:
        variables:
          - name: app
            value: mcp-kubernetes
  destination:
    namespace: flux-giantswarm
    naming:
      suffix: konfiguration
  reconciliation:
    interval: 1m
    retryInterval: 10s
    suspend: false
  sources:
    flux:
      gitRepository:
        name: "giantswarm-config"
        namespace: "flux-giantswarm"

